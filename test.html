<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
"http://www.w3.org/TR/html4/loose.dtd">
<html lang="ja">
  <head>
    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <meta http-equiv="content-language" content="ja">

    <title></title>

    <meta http-equiv="content-script-type" content="text/javascript">
    <meta http-equiv="content-style-type" content="text/css">

    <style type="text/css">
    </style>
    <script type="text/javascript" src="Processor.js"></script>
    <script type="text/javascript">

      var p1 = new Process();
      p1.execute = function() {
        //do something
        var self = this;
        this.foo = setInterval(function() {
          console.log("p1 timer action!");
          clearInterval(self.foo);
          self.done();
        }, 2000);
      };

      var p2 = new Process();
      p2.execute = function() {
        //do something
        var self = this;
        this.foo = setInterval(function() {
          console.log("p2 timer action!");
          clearInterval(self.foo);
          self.done();
        }, 1000);
      };

      var p3 = new Process();
      p3.execute = function() {
        //do something
        var self = this;
        this.foo = setInterval(function() {
          console.log("p3 timer action!");
          clearInterval(self.foo);
          self.done();
        }, 2000);
      };

      var processor = new Processor();
      processor.addCallback(null, function() {
        console.log("all done");
      });
      processor.add(p1).add(p2, p3);
      processor.execute();
    </script>

  </head>
  <body>
  </body>
</html>
